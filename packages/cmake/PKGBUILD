#!/bin/bash
# shellcheck disable=SC2034,SC2154,SC2068
# Maintainer: Jeremy Huntwork <jhuntwork@lightcubesolutions.com>

pkgname=cmake
pkgver=3.19.5
pkgrel=2
pkgdesc='The CMake toolsuite for building, testing and packaging software.'
arch=('x86_64')
url='https://cmake.org'
license=('GPL2')
groups=(core-dev)
depends=()
makedepends=(openssl-dev)
options=()
changelog=ChangeLog

source=(
    "${url}/files/v3.19/${pkgname}-${pkgver}.tar.gz"
)
sha256sums=(
    c432296eb5dec6d71eae15d140f6297d63df44e9ffe3e453628d1dc8fc4201ce
)


build() {
    cd_unpacked_src
    ./bootstrap --prefix=/usr
    make
}

package() {
    pkgfiles=(
        /usr/bin
        /usr/share
    )
    depends=(
        ld-musl-x86_64.so.1
        libc++.so.1
        libc++abi.so.1
        libcrypto.so.1.1
        libssl.so.1.1
        libunwind.so.1
    )
    std_package
}
